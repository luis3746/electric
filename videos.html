<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Galería YouTube con Reproducción</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .video-thumb img, .video-thumb iframe {
            width: 100%;
            height: 230px;
            object-fit: cover;
        }
        .video-thumb {
            position: relative;
            cursor: pointer;
        }
        .play-btn {
            position: absolute;
            left: 50%; top: 50%;
            transform: translate(-50%,-50%);
            font-size: 48px;
            color: white;
            text-shadow: 0 0 8px black;
            pointer-events: none;
        }
    </style>
</head>
<body>
<div class="container py-4">
  <h2 class="mb-4">Galería de YouTube</h2>
  <div id="gallery" class="row g-3"></div>
  <nav>
    <ul id="pagination" class="pagination justify-content-center my-4"></ul>
  </nav>
</div>

<script>
// --- Videos de ejemplo. Pega tus links aquí si fetch falla ---
let videos = [
  "https://www.youtube.com/watch?v=wlGgTxg2lAg",
  "https://youtu.be/82jgT6DLN44",
  "https://www.youtube.com/watch?v=iiE0IpwxM0g&ab_channel=MyChannel"
];
// --- Opcional: Cargar .txt público con links ---
// const TXT_FILE_URL = "https://tu-url-publica-del-txt";

// function loadVideoLinks(url) {
//     fetch(url)
//      .then(r => r.text())
//      .then(t => { videos = t.split('\n').map(x=>x.trim()).filter(x=>x.length>5); renderAll(1); })
//      .catch(e => { renderAll(1); });
// }

function getYouTubeID(url) {
    let m = url.match(/v=([^&]+)/);
    if (m) return m[1];
    m = url.match(/youtu\.be\/([^\?&]+)/);
    return m ? m[1] : null;
}

// La lógica para cada tarjeta: cambia miniatura por video al hacer clic
function renderGallery(videoLinks, page, perPage) {
    const gallery = document.getElementById('gallery');
    gallery.innerHTML = '';
    const start = (page-1)*perPage;
    const end = Math.min(start+perPage, videoLinks.length);

    for (let i = start; i < end; i++) {
        const videoID = getYouTubeID(videoLinks[i]);
        if(!videoID) continue;

        const thumb = `https://img.youtube.com/vi/${videoID}/hqdefault.jpg`;

        gallery.innerHTML += `
        <div class="col-12 col-md-4">
          <div class="card">
            <div class="video-thumb" onclick="playVideo(this, '${videoID}')">
              <img src="${thumb}" alt="Miniatura video" class="card-img-top">
              <span class="play-btn">▶</span>
            </div>
            <div class="card-body p-2 text-center">
              <a href="https://www.youtube.com/watch?v=${videoID}" target="_blank">Ver en YouTube</a>
            </div>
          </div>
        </div>`;
    }
}

// Reemplaza la miniatura por el iframe del reproductor cuando se hace clic
function playVideo(element, videoID) {
    element.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoID}?autoplay=1"
        frameborder="0" allowfullscreen allow="autoplay; encrypted-media"></iframe>`;
}

function renderPagination(videoLinks, perPage, page, onPageClick) {
    const pagination = document.getElementById('pagination');
    const total = Math.ceil(videoLinks.length / perPage);
    pagination.innerHTML = '';
    for (let i = 1; i <= total; i++) {
        pagination.innerHTML += `<li class="page-item${i === page ? ' active' : ''}">
            <a class="page-link" href="#">${i}</a>
        </li>`;
    }
    pagination.querySelectorAll('.page-link').forEach((el, idx) => {
        el.addEventListener('click', e => {
            e.preventDefault();
            onPageClick(idx+1);
        });
    });
}

const PER_PAGE = 6;

function renderAll(p) {
    renderGallery(videos, p, PER_PAGE);
    renderPagination(videos, PER_PAGE, p, renderAll);
}

window.addEventListener('DOMContentLoaded', () => {
    // Si usas fetch para cargar .txt, llama aquí: 
    loadVideoLinks('https://luis3746.github.io/electric/videos_subidos.txt');
    renderAll(1);
});
</script>
</body>
</html>
