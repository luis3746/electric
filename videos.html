<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Galería de YouTube</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .video-thumb iframe { width: 100%; height: 230px; }
    </style>
</head>
<body>
<div class="container py-4">
  <h2 class="mb-4">Galería de YouTube</h2>
  <div id="gallery" class="row g-3"></div>
  <nav>
    <ul id="pagination" class="pagination justify-content-center my-4"></ul>
  </nav>
</div>

<script>
// Esta función lee el archivo txt de links (debe estar público)
async function loadVideoLinks(url) {
    const resp = await fetch(url);
    const text = await resp.text();
    // Filtra solo líneas que parecen URL de YouTube válidas
    return text.split('\n').map(l => l.trim()).filter(l => l.match(/^https?:\/\/(www\.)?youtube\.com\/watch\?v=/));
}

// Extrae el ID del video de YouTube desde la URL
function getYouTubeID(url) {
    const m = url.match(/v=([^&]+)/);
    return m ? m[1] : null;
}

// Renderiza miniaturas en Bootstrap grid
<!-- Dentro de tu renderGallery() -->
function renderGallery(videoLinks, page, perPage) {
    const gallery = document.getElementById('gallery');
    gallery.innerHTML = '';
    const start = (page-1)*perPage;
    const end = Math.min(start+perPage, videoLinks.length);

    for (let i = start; i < end; i++) {
        const videoID = getYouTubeID(videoLinks[i]);
        if(!videoID) continue;
        // Miniatura de calidad media (puedes usar "hqdefault.jpg", "mqdefault.jpg" o "sddefault.jpg")
        const thumb = `https://img.youtube.com/vi/${videoID}/hqdefault.jpg`;
        gallery.innerHTML += `
        <div class="col-12 col-md-4">
          <div class="card">
            <a href="https://www.youtube.com/watch?v=${videoID}" target="_blank" style="display:block;position:relative">
              <img src="${thumb}" class="card-img-top" alt="Miniatura video">
              <span style="
                  position:absolute;
                  left:50%;top:50%;
                  transform:translate(-50%,-50%);
                  font-size:48px;
                  color:white;
                  text-shadow:0 0 8px black;
                  pointer-events: none;">
                  ▶
              </span>
            </a>
            <div class="card-body p-2">
              <a href="https://www.youtube.com/watch?v=${videoID}" target="_blank">Ver en YouTube</a>
            </div>
          </div>
        </div>`;
    }
}


// Genera la paginación Bootstrap
function renderPagination(videoLinks, perPage, page, onPageClick) {
    const pagination = document.getElementById('pagination');
    const total = Math.ceil(videoLinks.length / perPage);
    pagination.innerHTML = '';
    for (let i = 1; i <= total; i++) {
        pagination.innerHTML += `<li class="page-item${i === page ? ' active' : ''}">
            <a class="page-link" href="#">${i}</a>
        </li>`;
    }
    pagination.querySelectorAll('.page-link').forEach((el, idx) => {
        el.addEventListener('click', e => {
            e.preventDefault();
            onPageClick(idx+1);
        });
    });
}

// Cambia esta URL por la de tu videos_subidos.txt compartido en Drive como "cualquiera con link puede ver"
const TXT_FILE_URL = 'https://luis3746.github.io/electric/videos_subidos.txt';

let videos = [];
const PER_PAGE = 6; // Videos por página
let currentPage = 1;

window.addEventListener('DOMContentLoaded', async () => {
    videos = await loadVideoLinks(TXT_FILE_URL);
    const renderAll = p => {
        currentPage = p;
        renderGallery(videos, p, PER_PAGE);
        renderPagination(videos, PER_PAGE, p, renderAll);
    };
    renderAll(1);
});
</script>
</body>
</html>
